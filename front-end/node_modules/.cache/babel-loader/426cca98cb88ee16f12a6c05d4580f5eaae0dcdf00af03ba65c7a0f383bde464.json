{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import'../LoginPage.css';// Certifique-se de que o caminho está correto\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LoginPage(){const[cpf,setCpf]=useState('');const[birthdate,setBirthdate]=useState('');const[error,setError]=useState('');const[errorField,setErrorField]=useState('');const[isInvalidCpf,setIsInvalidCpf]=useState(false);const[isInvalidBirthdate,setIsInvalidBirthdate]=useState(false);const navigate=useNavigate();const handleCpfChange=event=>{const formattedValue=event.target.value.replace(/\\D/g,'').replace(/(\\d{3})(\\d)/,'$1.$2').replace(/(\\d{3})(\\d)/,'$1.$2').replace(/(\\d{3})(\\d{1,2})/,'$1-$2');setCpf(formattedValue);};const handleBirthdateChange=event=>{const formattedValue=event.target.value.replace(/\\D/g,'').replace(/(\\d{2})(\\d)/,'$1/$2').replace(/(\\d{2})(\\d)/,'$1/$2');setBirthdate(formattedValue);};const handleSubmit=async event=>{event.preventDefault();const cleanedCpf=cpf.replace(/\\D/g,'');const cleanedBirthdate=birthdate.replace(/\\D/g,'');try{const response=await axios.post('http://localhost:3301/api/login',{cpf:cleanedCpf,birthdate:cleanedBirthdate});console.log(\"Response from server:\",response.data);if(response.data.success&&response.data.user){localStorage.setItem('userName',response.data.user.name);navigate('/foodappmain');}else{setError(\"Dados incorretos: \".concat(response.data.message||'Erro desconhecido'));setErrorField('Login');}}catch(error){console.error('Erro ao tentar fazer login',error);setError('Erro ao tentar fazer login');setErrorField('Servidor');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/curitiba-logo.png\",alt:\"Curitiba Logo\",className:\"logo\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Bem vindo!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Entre com seus dados\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"cpf\",placeholder:\"CPF\",value:cpf,onChange:handleCpfChange,className:errorField==='Form'?'invalid':'',maxLength:\"14\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"birthdate\",placeholder:\"Data de Nascimento\",value:birthdate,onChange:handleBirthdateChange,className:errorField==='Form'?'invalid':'',maxLength:\"10\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"ACESSAR\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-alert\",children:error}),/*#__PURE__*/_jsx(\"a\",{href:\"/reset-password\",children:\"Esqueceu sua senha?\"})]});}export default LoginPage;","map":{"version":3,"names":["React","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","LoginPage","cpf","setCpf","birthdate","setBirthdate","error","setError","errorField","setErrorField","isInvalidCpf","setIsInvalidCpf","isInvalidBirthdate","setIsInvalidBirthdate","navigate","handleCpfChange","event","formattedValue","target","value","replace","handleBirthdateChange","handleSubmit","preventDefault","cleanedCpf","cleanedBirthdate","response","post","console","log","data","success","user","localStorage","setItem","name","concat","message","className","children","src","alt","onSubmit","type","id","placeholder","onChange","maxLength","href"],"sources":["C:/temp/uninter/frontend/src/components/LoginPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../LoginPage.css'; // Certifique-se de que o caminho está correto\r\n\r\nfunction LoginPage() {\r\n  const [cpf, setCpf] = useState('');\r\n  const [birthdate, setBirthdate] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [errorField, setErrorField] = useState('');\r\n  const [isInvalidCpf, setIsInvalidCpf] = useState(false);\r\n  const [isInvalidBirthdate, setIsInvalidBirthdate] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const handleCpfChange = (event) => {\r\n    const formattedValue = event.target.value.replace(/\\D/g, '')\r\n      .replace(/(\\d{3})(\\d)/, '$1.$2')\r\n      .replace(/(\\d{3})(\\d)/, '$1.$2')\r\n      .replace(/(\\d{3})(\\d{1,2})/, '$1-$2');\r\n    setCpf(formattedValue);\r\n  };\r\n\r\n  const handleBirthdateChange = (event) => {\r\n    const formattedValue = event.target.value.replace(/\\D/g, '')\r\n      .replace(/(\\d{2})(\\d)/, '$1/$2')\r\n      .replace(/(\\d{2})(\\d)/, '$1/$2');\r\n    setBirthdate(formattedValue);\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    const cleanedCpf = cpf.replace(/\\D/g, '');\r\n    const cleanedBirthdate = birthdate.replace(/\\D/g, '');\r\n\r\n    try {\r\n        const response = await axios.post('http://localhost:3301/api/login', {\r\n            cpf: cleanedCpf,\r\n            birthdate: cleanedBirthdate\r\n        });\r\n        console.log(\"Response from server:\", response.data);\r\n        if (response.data.success && response.data.user) {\r\n            localStorage.setItem('userName', response.data.user.name);\r\n            navigate('/foodappmain');\r\n        } else {\r\n            setError(`Dados incorretos: ${response.data.message || 'Erro desconhecido'}`);\r\n            setErrorField('Login');\r\n        }\r\n    } catch (error) {\r\n        console.error('Erro ao tentar fazer login', error);\r\n        setError('Erro ao tentar fazer login');\r\n        setErrorField('Servidor');\r\n    }\r\n};\r\n\r\n  return (\r\n    <div className=\"login-container\">\r\n      <img src=\"/images/curitiba-logo.png\" alt=\"Curitiba Logo\" className=\"logo\"/>\r\n      <h1>Bem vindo!</h1>\r\n      <p>Entre com seus dados</p>\r\n      <form onSubmit={handleSubmit}>\r\n        <input \r\n          type=\"text\"\r\n          id=\"cpf\"\r\n          placeholder=\"CPF\"\r\n          value={cpf}\r\n          onChange={handleCpfChange}\r\n          className={errorField === 'Form' ? 'invalid' : ''}\r\n          maxLength=\"14\"\r\n        />\r\n        <input \r\n          type=\"text\"\r\n          id=\"birthdate\"\r\n          placeholder=\"Data de Nascimento\"\r\n          value={birthdate}\r\n          onChange={handleBirthdateChange}\r\n          className={errorField === 'Form' ? 'invalid' : ''}\r\n          maxLength=\"10\"\r\n        />\r\n        <button type=\"submit\">ACESSAR</button>\r\n      </form>\r\n      {error && <div className=\"error-alert\">{error}</div>}\r\n      <a href=\"/reset-password\">Esqueceu sua senha?</a>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}