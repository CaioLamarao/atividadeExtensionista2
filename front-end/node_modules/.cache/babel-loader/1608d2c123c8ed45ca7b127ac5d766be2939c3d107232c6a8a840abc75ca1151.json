{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import'../LoginPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LoginPage(){const[cpf,setCpf]=useState('');const[birthdate,setBirthdate]=useState('');const[error,setError]=useState('');const[errorField,setErrorField]=useState('');// Adicionando estado para identificar o campo do erro\nconst[isInvalidCpf,setIsInvalidCpf]=useState(false);// Adicionando estado para validação de CPF\nconst[isInvalidBirthdate,setIsInvalidBirthdate]=useState(false);// Adicionando estado para validação de data de nascimento\nconst navigate=useNavigate();const handleCpfChange=event=>{const originalValue=event.target.value.replace(/\\D/g,'');let formattedValue='';if(originalValue.length<=11){formattedValue=originalValue.replace(/(\\d{3})(\\d)/,'$1.$2').replace(/(\\d{3})(\\d)/,'$1.$2').replace(/(\\d{3})(\\d{1,2})/,'$1-$2');}setCpf(formattedValue);};const handleBirthdateChange=event=>{const originalValue=event.target.value.replace(/\\D/g,'');let formattedValue='';if(originalValue.length<=8){formattedValue=originalValue.replace(/(\\d{2})(\\d)/,'$1/$2').replace(/(\\d{2})(\\d)/,'$1/$2');}setBirthdate(formattedValue);};const handleSubmit=async event=>{event.preventDefault();const cleanedCpf=cpf.replace(/\\D/g,'');const cleanedBirthdate=birthdate.replace(/\\D/g,'');try{const response=await axios.post('http://localhost:3301/api/login',{cpf:cleanedCpf,birthdate:cleanedBirthdate});if(response.data.success){// Armazene o nome do usuário e redirecione para a página principal\nlocalStorage.setItem('userName',response.data.user.name);navigate('/foodappmain');}else{setError(response.data.message);}}catch(error){setError('Erro ao tentar fazer login');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/curitiba-logo.png\",alt:\"Curitiba Logo\",className:\"logo\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Bem vindo!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Entre com seus dados\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"cpf\",placeholder:\"CPF\",value:cpf,onChange:handleCpfChange,className:errorField.includes('CPF')?'invalid':'',maxLength:\"14\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"birthdate\",placeholder:\"Data de Nascimento\",value:birthdate,onChange:handleBirthdateChange,className:errorField.includes('Data de Nascimento')?'invalid':'',maxLength:\"10\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"ACESSAR\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-alert\",children:error}),/*#__PURE__*/_jsx(\"a\",{href:\"/reset-password\",children:\"Esqueceu sua senha?\"})]});}export default LoginPage;","map":{"version":3,"names":["React","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","LoginPage","cpf","setCpf","birthdate","setBirthdate","error","setError","errorField","setErrorField","isInvalidCpf","setIsInvalidCpf","isInvalidBirthdate","setIsInvalidBirthdate","navigate","handleCpfChange","event","originalValue","target","value","replace","formattedValue","length","handleBirthdateChange","handleSubmit","preventDefault","cleanedCpf","cleanedBirthdate","response","post","data","success","localStorage","setItem","user","name","message","className","children","src","alt","onSubmit","type","id","placeholder","onChange","includes","maxLength","href"],"sources":["C:/temp/uninter/frontend/src/components/LoginPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../LoginPage.css';\r\n\r\nfunction LoginPage() {\r\n  const [cpf, setCpf] = useState('');\r\n  const [birthdate, setBirthdate] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [errorField, setErrorField] = useState(''); // Adicionando estado para identificar o campo do erro\r\n  const [isInvalidCpf, setIsInvalidCpf] = useState(false); // Adicionando estado para validação de CPF\r\n  const [isInvalidBirthdate, setIsInvalidBirthdate] = useState(false); // Adicionando estado para validação de data de nascimento\r\n  const navigate = useNavigate();\r\n\r\n  const handleCpfChange = (event) => {\r\n    const originalValue = event.target.value.replace(/\\D/g, '');\r\n    let formattedValue = '';\r\n    if (originalValue.length <= 11) {\r\n      formattedValue = originalValue\r\n        .replace(/(\\d{3})(\\d)/, '$1.$2')\r\n        .replace(/(\\d{3})(\\d)/, '$1.$2')\r\n        .replace(/(\\d{3})(\\d{1,2})/, '$1-$2');\r\n    }\r\n    setCpf(formattedValue);\r\n  };\r\n\r\n  const handleBirthdateChange = (event) => {\r\n    const originalValue = event.target.value.replace(/\\D/g, '');\r\n    let formattedValue = '';\r\n    if (originalValue.length <= 8) {\r\n      formattedValue = originalValue\r\n        .replace(/(\\d{2})(\\d)/, '$1/$2')\r\n        .replace(/(\\d{2})(\\d)/, '$1/$2');\r\n    }\r\n    setBirthdate(formattedValue);\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    const cleanedCpf = cpf.replace(/\\D/g, '');\r\n    const cleanedBirthdate = birthdate.replace(/\\D/g, '');\r\n\r\n    try {\r\n        const response = await axios.post('http://localhost:3301/api/login', {\r\n            cpf: cleanedCpf,\r\n            birthdate: cleanedBirthdate\r\n        });\r\n        if (response.data.success) {\r\n            // Armazene o nome do usuário e redirecione para a página principal\r\n            localStorage.setItem('userName', response.data.user.name);\r\n            navigate('/foodappmain');\r\n        } else {\r\n            setError(response.data.message);\r\n        }\r\n    } catch (error) {\r\n        setError('Erro ao tentar fazer login');\r\n    }\r\n  };\r\n\r\n\r\n\r\n  \r\n  return (\r\n    <div className=\"login-container\">\r\n      <img src=\"/images/curitiba-logo.png\" alt=\"Curitiba Logo\" className=\"logo\"/>\r\n      <h1>Bem vindo!</h1>\r\n      <p>Entre com seus dados</p>\r\n      <form onSubmit={handleSubmit}>\r\n        <input \r\n          type=\"text\"\r\n          id=\"cpf\"\r\n          placeholder=\"CPF\"\r\n          value={cpf}\r\n          onChange={handleCpfChange}\r\n          className={errorField.includes('CPF') ? 'invalid' : ''}\r\n          maxLength=\"14\"\r\n        />\r\n        <input \r\n          type=\"text\"\r\n          id=\"birthdate\"\r\n          placeholder=\"Data de Nascimento\"\r\n          value={birthdate}\r\n          onChange={handleBirthdateChange}\r\n          className={errorField.includes('Data de Nascimento') ? 'invalid' : ''}\r\n          maxLength=\"10\"\r\n        />\r\n        <button type=\"submit\">ACESSAR</button>\r\n      </form>\r\n      {error && <div className=\"error-alert\">{error}</div>}\r\n      <a href=\"/reset-password\">Esqueceu sua senha?</a>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}