{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import'../css/LoginPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LoginPage(){const[cpf,setCpf]=useState('');const[birthdate,setBirthdate]=useState('');const[error,setError]=useState('');const navigate=useNavigate();const handleCpfChange=event=>{const formattedValue=event.target.value.replace(/\\D/g,'').replace(/(\\d{3})(\\d)/,'$1.$2').replace(/(\\d{3})(\\d)/,'$1.$2').replace(/(\\d{3})(\\d{1,2})/,'$1-$2');setCpf(formattedValue);};const handleBirthdateChange=event=>{const formattedValue=event.target.value.replace(/\\D/g,'').replace(/(\\d{2})(\\d)/,'$1/$2').replace(/(\\d{2})(\\d)/,'$1/$2');setBirthdate(formattedValue);};const handleSubmit=async event=>{event.preventDefault();const cleanedCpf=cpf.replace(/\\D/g,'');const cleanedBirthdate=birthdate.replace(/\\D/g,'');try{const response=await axios.post('http://localhost:3301/api/user/login',{cpf:cleanedCpf,birthdate:cleanedBirthdate});if(response.data.success){// Armazene o nome do usuário junto a outras informações e redirecione para a página principal\nlocalStorage.setItem('userName',response.data.user.name);localStorage.setItem('loginCount',response.data.user.loginCount);localStorage.setItem('loginStreak',response.data.user.loginStreak);localStorage.setItem('familyMembers',response.data.user.familyMembers);localStorage.setItem('age',response.data.user.age);localStorage.setItem('sexo',response.data.user.sexo);localStorage.setItem('active',response.data.user.active);localStorage.setItem('membersInfo',response.data.user.membersInfo);navigate('/foodappmain');}else{setError(response.data.message);}}catch(error){setError('Erro ao tentar fazer login: '+error.message);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/curitiba-logo.png\",alt:\"Curitiba Logo\",className:\"logo\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Bem vindo!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Entre com seus dados\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"cpf\",placeholder:\"CPF\",value:cpf,onChange:handleCpfChange,className:error?'invalid':'',maxLength:\"14\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"birthdate\",placeholder:\"Data de Nascimento\",value:birthdate,onChange:handleBirthdateChange,className:error?'invalid':'',maxLength:\"10\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"ACESSAR\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-alert\",children:error}),/*#__PURE__*/_jsx(\"a\",{href:\"/reset-password\",children:\"Esqueceu sua senha?\"})]});}export default LoginPage;","map":{"version":3,"names":["React","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","LoginPage","cpf","setCpf","birthdate","setBirthdate","error","setError","navigate","handleCpfChange","event","formattedValue","target","value","replace","handleBirthdateChange","handleSubmit","preventDefault","cleanedCpf","cleanedBirthdate","response","post","data","success","localStorage","setItem","user","name","loginCount","loginStreak","familyMembers","age","sexo","active","membersInfo","message","className","children","src","alt","onSubmit","type","id","placeholder","onChange","maxLength","href"],"sources":["C:/temp/Atividade extensionista 2/front-end/src/components/LoginPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../css/LoginPage.css';\r\n\r\nfunction LoginPage() {\r\n  const [cpf, setCpf] = useState('');\r\n  const [birthdate, setBirthdate] = useState('');\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const handleCpfChange = (event) => {\r\n    const formattedValue = event.target.value.replace(/\\D/g, '')\r\n      .replace(/(\\d{3})(\\d)/, '$1.$2')\r\n      .replace(/(\\d{3})(\\d)/, '$1.$2')\r\n      .replace(/(\\d{3})(\\d{1,2})/, '$1-$2');\r\n    setCpf(formattedValue);\r\n  };\r\n\r\n  const handleBirthdateChange = (event) => {\r\n    const formattedValue = event.target.value.replace(/\\D/g, '')\r\n      .replace(/(\\d{2})(\\d)/, '$1/$2')\r\n      .replace(/(\\d{2})(\\d)/, '$1/$2');\r\n    setBirthdate(formattedValue);\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    const cleanedCpf = cpf.replace(/\\D/g, '');\r\n    const cleanedBirthdate = birthdate.replace(/\\D/g, '');\r\n\r\n    try {\r\n      const response = await axios.post('http://localhost:3301/api/user/login', {\r\n        cpf: cleanedCpf,\r\n        birthdate: cleanedBirthdate\r\n      });\r\n      if (response.data.success) {\r\n        // Armazene o nome do usuário junto a outras informações e redirecione para a página principal\r\n        localStorage.setItem('userName', response.data.user.name);\r\n        localStorage.setItem('loginCount', response.data.user.loginCount);\r\n        localStorage.setItem('loginStreak', response.data.user.loginStreak);\r\n        localStorage.setItem('familyMembers', response.data.user.familyMembers);\r\n        localStorage.setItem('age', response.data.user.age);\r\n        localStorage.setItem('sexo', response.data.user.sexo);\r\n        localStorage.setItem('active', response.data.user.active);\r\n        localStorage.setItem('membersInfo', response.data.user.membersInfo);\r\n        navigate('/foodappmain');\r\n      } else {\r\n        setError(response.data.message);\r\n      }\r\n    } catch (error) {\r\n      setError('Erro ao tentar fazer login: ' + error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-container\">\r\n      <img src=\"/images/curitiba-logo.png\" alt=\"Curitiba Logo\" className=\"logo\"/>\r\n      <h1>Bem vindo!</h1>\r\n      <p>Entre com seus dados</p>\r\n      <form onSubmit={handleSubmit}>\r\n        <input \r\n          type=\"text\"\r\n          id=\"cpf\"\r\n          placeholder=\"CPF\"\r\n          value={cpf}\r\n          onChange={handleCpfChange}\r\n          className={error ? 'invalid' : ''}\r\n          maxLength=\"14\"\r\n        />\r\n        <input \r\n          type=\"text\"\r\n          id=\"birthdate\"\r\n          placeholder=\"Data de Nascimento\"\r\n          value={birthdate}\r\n          onChange={handleBirthdateChange}\r\n          className={error ? 'invalid' : ''}\r\n          maxLength=\"10\"\r\n        />\r\n        <button type=\"submit\">ACESSAR</button>\r\n      </form>\r\n      {error && <div className=\"error-alert\">{error}</div>}\r\n      <a href=\"/reset-password\">Esqueceu sua senha?</a>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}