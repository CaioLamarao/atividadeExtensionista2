{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate,useLocation}from'react-router-dom';import'../MenuDetails.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function MenuDetails(){const[activeDetail,setActiveDetail]=useState('');const[sidebarVisible,setSidebarVisible]=useState(false);const[searchQuery,setSearchQuery]=useState('');const[searchResults,setSearchResults]=useState([]);const[alertMessage,setAlertMessage]=useState('');const[mealDetails,setMealDetails]=useState({almoço:'',jantar:''});const navigate=useNavigate();const location=useLocation();const day=location.state?location.state.day:\"Dia\";useEffect(()=>{if(day){fetchMealDetails(day);// Carregar os detalhes da refeição quando o dia for selecionado\n}},[day]);const toggleDetails=detail=>{setSidebarVisible(!sidebarVisible);setActiveDetail(activeDetail===detail?'':detail);};const fetchMealDetails=async day=>{try{const response=await fetch(\"http://localhost:3301/api/meals/day/\".concat(day.toLowerCase()));const result=await response.json();if(result.length>0){setMealDetails({almoço:result[0].components,jantar:result[0].components});}else{setMealDetails({almoço:'Informação não disponível',jantar:'Informação não disponível'});}}catch(error){console.error('Failed to fetch meal details:',error);setMealDetails({almoço:'Erro ao carregar',jantar:'Erro ao carregar'});}};const handleSearchChange=event=>{setSearchQuery(event.target.value);setAlertMessage('');};const handleSearch=async()=>{if(searchQuery.length>0){try{const response=await fetch(\"http://localhost:3301/api/food/search?name=\".concat(encodeURIComponent(searchQuery)));const data=await response.json();if(data.length===0){setAlertMessage('Alimento não encontrado');setSearchResults([]);}else{setSearchResults(data.slice(0,3));// Limit results to 3 items\nsetSearchQuery('');// Clear the search field\n}}catch(error){console.error('Search failed:',error);setAlertMessage('Search failed');}}};const removeItem=id=>{setSearchResults(prev=>prev.filter(item=>item.id!==id));};return/*#__PURE__*/_jsxs(\"div\",{className:\"menu-details-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sidebar \".concat(sidebarVisible?'visible':''),children:sidebarVisible&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/curitiba-logo.png\",alt:\"Curitiba Logo\",className:\"logo\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(-1),className:\"back-button\",children:\"\\uD83D\\uDD19\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Pesquisar...\",className:\"search-input\",value:searchQuery,onChange:handleSearchChange}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearch,className:\"search-button\",children:\"Adicionar\"}),alertMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"alert\",children:alertMessage}),/*#__PURE__*/_jsx(\"div\",{className:\"search-results\",children:searchResults.map(item=>/*#__PURE__*/_jsxs(\"div\",{children:[item.nome,\" \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeItem(item.id),className:\"remove-button\",children:\"X\"})]},item.id))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"menu-title\",children:[\"Card\\xE1pio de \",day]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Almo\\xE7o:\"}),/*#__PURE__*/_jsx(\"p\",{children:mealDetails.almoço}),/*#__PURE__*/_jsx(\"h3\",{children:\"Jantar:\"}),/*#__PURE__*/_jsx(\"p\",{children:mealDetails.jantar}),/*#__PURE__*/_jsx(\"div\",{className:\"info-section\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{onClick:()=>toggleDetails('doubts'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon\",\"aria-hidden\":\"true\",children:\"\\u2753\"}),\" D\\xFAvidas com o preparo?\",activeDetail==='doubts'&&/*#__PURE__*/_jsx(\"p\",{children:\"Detalhes sobre como preparar...\"})]}),/*#__PURE__*/_jsxs(\"li\",{onClick:()=>toggleDetails('substitutes'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon\",\"aria-hidden\":\"true\",children:\"\\uD83D\\uDD04\"}),\" Alimentos substitutivos.\",activeDetail==='substitutes'&&/*#__PURE__*/_jsx(\"p\",{children:\"Op\\xE7\\xF5es para substituir...\"})]}),/*#__PURE__*/_jsxs(\"li\",{onClick:()=>toggleDetails('shoppingList'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon\",\"aria-hidden\":\"true\",children:\"\\uD83D\\uDED2\"}),\" Lista de compras.\",activeDetail==='shoppingList'&&/*#__PURE__*/_jsx(\"p\",{children:\"O que comprar para preparar...\"})]})]})})]})]});}export default MenuDetails;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MenuDetails","activeDetail","setActiveDetail","sidebarVisible","setSidebarVisible","searchQuery","setSearchQuery","searchResults","setSearchResults","alertMessage","setAlertMessage","mealDetails","setMealDetails","almoço","jantar","navigate","location","day","state","fetchMealDetails","toggleDetails","detail","response","fetch","concat","toLowerCase","result","json","length","components","error","console","handleSearchChange","event","target","value","handleSearch","encodeURIComponent","data","slice","removeItem","id","prev","filter","item","className","children","src","alt","onClick","type","placeholder","onChange","map","nome"],"sources":["C:/temp/Atividade extensionista 2/front-end/src/components/MenuDetails.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport '../MenuDetails.css';\r\n\r\nfunction MenuDetails() {\r\n  const [activeDetail, setActiveDetail] = useState('');\r\n  const [sidebarVisible, setSidebarVisible] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [alertMessage, setAlertMessage] = useState('');\r\n  const [mealDetails, setMealDetails] = useState({ almoço: '', jantar: '' });\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const day = location.state ? location.state.day : \"Dia\";\r\n\r\n  useEffect(() => {\r\n    if (day) {\r\n      fetchMealDetails(day);  // Carregar os detalhes da refeição quando o dia for selecionado\r\n    }\r\n  }, [day]);\r\n\r\n  const toggleDetails = (detail) => {\r\n    setSidebarVisible(!sidebarVisible);\r\n    setActiveDetail(activeDetail === detail ? '' : detail);\r\n  };\r\n\r\n  const fetchMealDetails = async (day) => {\r\n    try {\r\n      const response = await fetch(`http://localhost:3301/api/meals/day/${day.toLowerCase()}`);\r\n      const result = await response.json();\r\n      if (result.length > 0) {\r\n        setMealDetails({ almoço: result[0].components, jantar: result[0].components });\r\n      } else {\r\n        setMealDetails({ almoço: 'Informação não disponível', jantar: 'Informação não disponível' });\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to fetch meal details:', error);\r\n      setMealDetails({ almoço: 'Erro ao carregar', jantar: 'Erro ao carregar' });\r\n    }\r\n  };\r\n\r\n  const handleSearchChange = (event) => {\r\n    setSearchQuery(event.target.value);\r\n    setAlertMessage('');\r\n  };\r\n\r\n  const handleSearch = async () => {\r\n    if (searchQuery.length > 0) {\r\n      try {\r\n        const response = await fetch(`http://localhost:3301/api/food/search?name=${encodeURIComponent(searchQuery)}`);\r\n        const data = await response.json();\r\n        if (data.length === 0) {\r\n          setAlertMessage('Alimento não encontrado');\r\n          setSearchResults([]);\r\n        } else {\r\n          setSearchResults(data.slice(0, 3)); // Limit results to 3 items\r\n          setSearchQuery(''); // Clear the search field\r\n        }\r\n      } catch (error) {\r\n        console.error('Search failed:', error);\r\n        setAlertMessage('Search failed');\r\n      }\r\n    }\r\n  };\r\n\r\n  const removeItem = id => {\r\n    setSearchResults(prev => prev.filter(item => item.id !== id));\r\n  };\r\n\r\n  return (\r\n    <div className=\"menu-details-container\">\r\n      <div className={`sidebar ${sidebarVisible ? 'visible' : ''}`}>\r\n        {sidebarVisible && (\r\n          <>\r\n            <img src=\"/images/curitiba-logo.png\" alt=\"Curitiba Logo\" className=\"logo\"/>\r\n            <button onClick={() => navigate(-1)} className=\"back-button\">🔙</button>\r\n            <input type=\"text\" placeholder=\"Pesquisar...\" className=\"search-input\" value={searchQuery} onChange={handleSearchChange} />\r\n            <button onClick={handleSearch} className=\"search-button\">Adicionar</button>\r\n            {alertMessage && <div className=\"alert\">{alertMessage}</div>}\r\n            <div className=\"search-results\">\r\n              {searchResults.map(item => (\r\n                <div key={item.id}>\r\n                  {item.nome} <button onClick={() => removeItem(item.id)} className=\"remove-button\">X</button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n      <div className=\"content\">\r\n        <h2 className=\"menu-title\">Cardápio de {day}</h2>\r\n        <h3>Almoço:</h3>\r\n        <p>{mealDetails.almoço}</p>\r\n        <h3>Jantar:</h3>\r\n        <p>{mealDetails.jantar}</p>\r\n        <div className=\"info-section\">\r\n          <ul>\r\n            <li onClick={() => toggleDetails('doubts')}>\r\n              <span className=\"icon\" aria-hidden=\"true\">❓</span> Dúvidas com o preparo?\r\n              {activeDetail === 'doubts' && <p>Detalhes sobre como preparar...</p>}\r\n            </li>\r\n            <li onClick={() => toggleDetails('substitutes')}>\r\n              <span className=\"icon\" aria-hidden=\"true\">🔄</span> Alimentos substitutivos.\r\n              {activeDetail === 'substitutes' && <p>Opções para substituir...</p>}\r\n            </li>\r\n            <li onClick={() => toggleDetails('shoppingList')}>\r\n              <span className=\"icon\" aria-hidden=\"true\">🛒</span> Lista de compras.\r\n              {activeDetail === 'shoppingList' && <p>O que comprar para preparar...</p>}\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MenuDetails;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}